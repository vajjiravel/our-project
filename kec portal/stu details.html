<!DOCTYPE html>
<html lang="en">

<head>
    <title>KEC PORTAL</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>

        *{
	margin: 0;
	padding: 0;
	text-decoration: none;
}
body{
	font-family: montserrat;
}
nav{
	height: 80px;
	width: 100%;
	background: #34495e;
}
label.logo{
	font-size: 35px;
	font-weight: bold;
	color: white;
	padding:  0 100px;
	line-height: 80px;
}
    </style>
</head>

<body>
    <nav>
        <label class="logo">STUDENT DEATILS</label>
    </nav>
    
    <div class="container">
        
        <div class="row"> 
            <div class="col-md-12 text-right">
                <input type="button" id="btnAdd" class="btn btn-primary para" value="Add New" />
            </div>
        </div>
        <div class="row pt-4">
            <div class="col-md-12 col-sm-12 col-12 p-2 ">
                <table id="tblData" class="table table-bordered table-hover table-striped">
                    <thead>
                        <tr> 
                            <th>Name</th>
				            <th>Department</th>
                            <th>Roll_No</th>
                            <th>Year</th>
                            <th class="tdaction">Action</th>
                        </tr>
                    </thead>
                    <tbody> 
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
        var emptyRow = "<tr><td colspan='5' class='text-center'> No Records Available</td></tr>";
        var emptyNewRow = "<tr class='trNewRow'>"; 
        emptyNewRow = emptyNewRow + "    <td class='tdName'>";
        emptyNewRow = emptyNewRow + "        <input type='text' class='form-control txtName' placeholder='Enter Name'/>";
        emptyNewRow = emptyNewRow + "    </td>";
        emptyNewRow = emptyNewRow + "    <td class='tdDepartment'>";
        emptyNewRow = emptyNewRow + "        <input type='text' class='form-control txtDepartment' placeholder='Enter Department'/>";
        emptyNewRow = emptyNewRow + "    </td>";
        emptyNewRow = emptyNewRow + "    <td class='tdRoll_No'>";
        emptyNewRow = emptyNewRow + "        <input type='text' class='form-control txtRoll_No' placeholder='Enter Roll_No'/>";
        emptyNewRow = emptyNewRow + "    </td>";
	    emptyNewRow = emptyNewRow + "    <td class='tdYear'>";
        emptyNewRow = emptyNewRow + "        <input type='text' class='form-control txtYear' placeholder='Enter Year'/>";
        emptyNewRow = emptyNewRow + "    </td>";
        emptyNewRow = emptyNewRow + "    <td class='tdAction'>";
        emptyNewRow = emptyNewRow + "        <button class='btn btn-sm btn-success btn-save'> Save</button>";
        emptyNewRow = emptyNewRow + "        <button class='btn btn-sm btn-success btn-cancel'> Cancel</button>";
        emptyNewRow = emptyNewRow + "    </td>";
        emptyNewRow = emptyNewRow + "</tr>";

        var rowButtons ="<button class='btn btn-success btn-sm btn-edit' > Edit </button>  <button class='btn btn-danger btn-sm' > Delete </button> ";
        var rowUpdateButtons ="<button class='btn btn-success btn-sm btn-save' > Update </button>  <button class='btn btn-danger btn-sm btn-save' > Cancel </button> ";

        $(document).ready(function () {
            debugger;
            $("#tblData tbody").append(emptyRow); // adding empty row on page load 
            
            $("#btnAdd").click(function () { 
                debugger;
                if ($("#tblData tbody").children().children().length == 1) {
                    $("#tblData tbody").html("");
                }
                debugger;
                $("#tblData tbody").append(emptyNewRow); // appending dynamic string to table tbody
            });
            
            $('#tblData').on('click', '.btn-save', function () {
                const name =  $(this).parent().parent().find(".txtName").val();
                $(this).parent().parent().find(".tdName").html(""+name+""); 
                const Department =  $(this).parent().parent().find(".txtDepartment").val();
                $(this).parent().parent().find(".tdDepartment").html(""+Department+"");
                const Roll_No =  $(this).parent().parent().find(".txtRoll_No").val();
                $(this).parent().parent().find(".tdRoll_No").html(""+Roll_No+"");
		    const Year =  $(this).parent().parent().find(".txtYear").val();
                $(this).parent().parent().find(".tdYear").html(""+Year+"");
                $(this).parent().parent().find(".tdAction").html(rowButtons);
            });
             
            
            $('#tblData').on('click', '.btn-danger', function () { // registering function for delete button  
                $(this).parent().parent().remove();
                if ($("#tblData tbody").children().children().length == 0) {
                    $("#tblData tbody").append(emptyRow);
                }
            });
            

            $('#tblData').on('click', '.btn-cancel', function () { 
                $(this).parent().parent().remove();
            });
            $('#tblData').on('click', '.btn-edit', function () { 
                const name =$(this).parent().parent().find(".tdName").html();

                $(this).parent().parent().find(".tdName").html("<input type='text' value='"+name+"' class='form-control txtName' placeholder='Enter Name'/>"); 


                const Department =$(this).parent().parent().find(".tdDepartment").html();

                $(this).parent().parent().find(".tdDepartment").html("<input type='text' value='"+Department+"' class='form-control txtDepartment' placeholder='Enter Department'/>"); 


                const Roll_No =$(this).parent().parent().find(".tdRoll_No").html();

                $(this).parent().parent().find(".tdRoll_No").html("<input type='text' value='"+Roll_No+"' class='form-control txtRoll_No' placeholder='Enter Roll_No'/>"); 

		        const Year =$(this).parent().parent().find(".tdYear").html();

                $(this).parent().parent().find(".tdYear").html("<input type='text' value='"+Year+"' class='form-control txtYear' placeholder='Enter Year'/>"); 
                $(this).parent().parent().find(".tdAction").html(rowUpdateButtons);
                
                
            });
        });
    </script> 
</body> 
</html>